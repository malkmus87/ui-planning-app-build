(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],[,,,,,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var a=n(33),r=["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],o={shorttermgoal:"shortTermGoals",endgoal:"endGoals",yearlygoal:"yearlyGoals",monthlygoal:"monthlyGoals",dailygoal:"dailyGoals",weeklygoal:"weeklyGoals",evaluation:"evaluations"},i=new a.a({mainPath:"https://planning-app-backend.azurewebsites.net"})}).call(this,n(41)(e))},,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return g}));var a=n(0),r=n.n(a),o=(n(61),n(45)),i=n.n(o),s=n(46),l=n.n(s),c=n(44),u=n.n(c),d=(n(48),n(47)),m=n.n(d),p=function(e){return r.a.createElement("div",{style:e.style,className:"BackwardsButton",onClick:e.onClick},r.a.createElement("div",{className:"BackwardsButtonArrow"}),r.a.createElement("div",{className:"BackwardsButtonInner"}))},h=function(e){var t="small"===e.styleType?{}:{addIcon:{fontSize:20},assignmnentIcon:{fontSize:"16px",marginleft:-5,paddingTop:-3}};return console.log(t.addIcon),r.a.createElement("button",{className:"AddButton",onClick:e.onClick},r.a.createElement(u.a,{style:t.assignmentIcon,className:"Icon"}),r.a.createElement(i.a,{style:t.addIcon,className:"Icon"}))},v=function(e){var t={fontSize:"20px",color:"darkgreen",display:"inline-block",overflow:"visible"};if(void 0!==e.style&&"object"===typeof e.style){t=Object.assign(t,e.style)}return r.a.createElement(l.a,{onClick:e.onClick,style:t,className:"SaveIcon"})},g=function(e){var t={fontSize:"20px",display:"inline-block",color:"#ED213A",overflow:"visible"};if(void 0!==e.style&&"object"===typeof e.style){t=Object.assign(t,e.style)}return r.a.createElement(m.a,{style:t,onClick:e.onClick,className:"DeleteIcon"})}},,,,,,function(e,t,n){"use strict";var a=n(11),r=n(5),o=n(6),i=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,[{key:"removeCookie",value:function(e){document.cookie=e+"=;  expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},{key:"setCookie",value:function(e,t){e.length>0&&!1!==t&&(document.cookie=e+"="+t+";")}},{key:"getCookie",value:function(e){var t=document.cookie.split(";"),n="";return t.forEach((function(t){var r=t.split("="),o=Object(a.a)(r,2),i=o[0],s=o[1];i===e&&(n=s)})),n}}]),e}();t.a=new i},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var a=n(11),r=n(15),o=n(0),i=n.n(o),s=(n(59),function(e){var t=e.name,n=e.value,a=e.onChange,o=e.style;return i.a.createElement("input",{style:o,type:"text",onChange:function(e){e.preventDefault(),a(Object(r.a)({},e.target.name,e.target.value))},name:t,value:n})}),l=function(e){var t=e.name,n=e.value,s=e.onChange,l=e.style,c=e.placeHolder,u=Object(o.useState)(!1),d=Object(a.a)(u,2),m=d[0],p=d[1],h={height:40*n.split("\n").length};if(void 0!==l&&null!==l){var v=h;h=Object.assign(l,v)}return i.a.createElement("textarea",{placeHolder:c,className:"TextArea",style:h,onKeyDown:function(e){if(" "===e.key){var t=n.split("\n");0===t[t.length-1].length&&e.preventDefault()}},onKeyUp:function(e){"Shift"===e.key&&!0===m&&p(!1)},onChange:function(e){var a=!1,o=e.target.value;if(e.target.value>n){var i=o.split("\n");40===i[i.length-1].length&&(a=!0)}var l=a?"\n":"";s(Object(r.a)({},t,e.target.value+l))},spellCheck:"false",name:t,value:n})}},,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var a=n(15),r=n(21),o=n(2),i=n(5),s=n(6),l=n(14),c=n(13),u=n(0),d=n.n(u),m=n(28),p=(n(60),n(19)),h=[{name:"name",description:"Namnge din planering",label:"Name"},{name:"description",description:"Beskriv din planering kort",label:"Description"},{name:"expectedEndYear",description:"Vilket \xe5r vill du uppn\xe5 slutm\xe5let?",label:"Expected end year"}],v=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).onChange=function(e){s.setState(Object(o.a)({},e))},s.onKeyDown=function(e,t){if("Enter"===e.key){var n=[].concat(Object(r.a)(s.state.submitted),[{name:t.name,value:s.state.value,label:t.label}]),a=s.state.step>=h.length-1?s.state.step:s.state.step+1;s.setState({step:a,value:"",submitted:n}),s.state.step===a&&s.onFinalSubmit(n)}},s.goBackward=function(){var e=s.state.step-1,t=s.state.submitted.slice(0,-1),n=s.state.submitted[s.state.submitted.length-1].value;s.setState({step:e,submitted:t,value:n})},s.onFinalSubmit=function(e){var t={};e.forEach((function(e){var n=t;t=Object(o.a)(Object(o.a)({},n),{},Object(a.a)({},e.name,e.value))})),s.props.onFinalSubmit(t)},s.state={step:0,value:"",submitted:[]},s}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=h[this.state.step];return d.a.createElement("div",{className:"Creator",onKeyDown:function(n){return e.onKeyDown(n,t)}},d.a.createElement("div",null,d.a.createElement("label",null,t.description),d.a.createElement(m.b,{name:"value",value:this.state.value,onChange:this.onChange})),this.state.step>0?d.a.createElement(p.b,{onClick:this.goBackward}):null)}}]),n}(d.a.Component)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(3),r=n.n(a),o=n(4),i=n(2),s=n(5),l=n(6),c=n(25),u=function(){function e(t){var n=t.mainPath;Object(s.a)(this,e),this.setMainPath(n),this.tokenCookieName="token",this.headers={"Content-Type":"application/json"}}return Object(l.a)(e,[{key:"setTokenCookieName",value:function(e){this.tokenCookieName=e}},{key:"setMainPath",value:function(e){this.mainPath=e}},{key:"setHeaders",value:function(e){this.headers=Object(i.a)(Object(i.a)({},e),{},{"Content-Type":"application/json"})}},{key:"get",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mainPath+"/"+t,a="Bearer "+c.a.getCookie(this.tokenCookieName),e.next=4,fetch(n,{method:"get",headers:Object(i.a)(Object(i.a)({},this.headers),{},{Authorization:a})});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a,o,s,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.mainPath+"/"+t,o=JSON.stringify(n),s="Bearer "+c.a.getCookie(this.tokenCookieName),e.next=5,fetch(a,{method:"post",headers:Object(i.a)(Object(i.a)({},this.headers),{},{Authorization:s}),body:o});case 5:return l=e.sent,e.abrupt("return",l);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"patchID",value:function(){var e=Object(o.a)(r.a.mark((function e(t,n,a){var o,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.mainPath+"/"+t+"/"+n,i=JSON.stringify(a),e.next=4,fetch(o,{method:"PATCH",headers:this.headers,body:i});case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}()},,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),o=n(4),i=n(5),s=n(6),l=n(14),c=n(13),u=n(0),d=n.n(u),m=n(30),p=n.n(m),h=(n(58),n(9)),v=n(15),g=n(2),f=n(21),b=(n(66),n(19)),y=n(49),k=n.n(y),O=(n(67),n(28)),j=(n(68),function(e){var t=e.onSave,n=e.onReset;return d.a.createElement("div",{className:"ActionRow"},d.a.createElement(b.d,{onClick:t,style:{marginRight:20}}),d.a.createElement(b.c,{onClick:n,style:{marginRight:20}}))}),E=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).setInitialState=function(){a.setState({initialTodo:a.props.todo,todo:a.props.todo,mounted:!0})},a.componentDidMount=function(){a.setInitialState()},a.componentDidReceiveProps=function(e){a.props._id===e._id&&a.props.todo===e.todo||a.setInitialState()},a.onInputChange=function(e){a.setState(Object(g.a)({},e))},a.onCheckBoxClick=function(){var e=!a.props.finished;a.props.onGoalChange(a.props.type,a.props._id,{finished:e})},a.onSave=function(){a.state.todo.length>0&&(a.setState({initialTodo:a.state.todo,todo:a.state.todo}),a.props.onGoalChange(a.props.type,a.props._id,{todo:a.state.todo}))},a.onReset=function(){a.setState({todo:a.state.initialTodo})},a.state={initialTodo:"",todo:""},a}return Object(s.a)(n,[{key:"render",value:function(){var e=function(e){switch(e){case"dailygoal":return{input:{borderRadius:"4px 0 0 1px"},main:{padding:0,width:"100%",display:"inline-block"}};default:return{input:{borderRadius:"4px 0 0 1px"},main:{width:"100%"}}}}(this.props.styleType);return this.state.mounted?d.a.createElement("div",{className:"Goal",style:e.main,key:this.props._id},d.a.createElement("div",{className:"InputRow"},d.a.createElement(O.a,{name:"todo",value:this.state.todo,style:e.input,placeHolder:void 0!==this.props.placeHolder?this.props.placeHolder:"Beskriv ditt m\xe5l",onChange:this.onInputChange,onSubmit:this.onSave}),this.state.initialTodo.length>0?d.a.createElement("div",{className:"CheckIconWrapper",onClick:this.onCheckBoxClick},this.props.finished?d.a.createElement(k.a,{className:"CheckIcon"}):null):null),this.state.todo!==this.state.initialTodo?d.a.createElement(j,{onSave:this.onSave,onReset:this.onReset,style:{marginRight:20}}):null):null}}]),n}(d.a.Component),w=(n(69),function(e){var t=e.shortTermGoals,n=e.onGoalChange,a=(e.style,e.goalStyle);return d.a.createElement("div",{className:"GoalList"},t.length>0?t.map((function(e,t){return d.a.createElement("div",{className:"StandardRow"},d.a.createElement(E,Object.assign({},e,{onGoalChange:n,style:a})))})):d.a.createElement("div",{className:"NoItemsComponent"},"Inga m\xe5l tillagda"))}),C=(n(70),function(e){var t=e.type,n=e.month,a=e.year,r=e.week,o=e.day,i=e.todo,s={todo:void 0!==i?i:"",longTermPlanningID:e.longTermPlanningID,type:t};switch(t){case"endgoal":return Object(g.a)({},s);case"yearlygoal":return Object(g.a)(Object(g.a)({},s),{},{year:a});case"monthlygoal":return Object(g.a)(Object(g.a)({},s),{},{month:n,year:a});case"weeklygoal":return Object(g.a)(Object(g.a)({},s),{},{year:a,month:n,week:r});case"dailygoal":return Object(g.a)(Object(g.a)({},s),{},{year:a,month:n,week:r,day:o});default:return Object(g.a)(Object(g.a)({},s),{},{month:n,year:a})}}),S=(n(71),function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).onInputChange=function(e){a.setState(Object(g.a)({},e))},a.onSave=function(){var e=!1;void 0!==a.props.evaluation._id&&(e=a.props.evaluation._id),a.props.onEvaluationChange(a.props.type,e,{text:a.state.text})},a.onReset=function(){a.setState({text:a.state.initialText})},a.state={},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.setInitialState()}},{key:"componentDidUpdate",value:function(e){console.log(this.props.evaluation._id),this.props.evaluation._id!==e.evaluation._id&&this.setInitialState()}},{key:"setInitialState",value:function(){this.setState({initialText:this.props.evaluation.text,text:this.props.evaluation.text,mounted:!0})}},{key:"render",value:function(){return void 0!==this.state.text?d.a.createElement("div",{className:"Evaluation",style:this.props.style},d.a.createElement("p",{className:"ProgressParagraph"},"Utv\xe4rdering"),d.a.createElement(O.a,{name:"text",value:this.state.text,placeHolder:"Skriv vad som g\xe5tt bra och d\xe5ligt",style:{width:"calc(100% - 15px)",background:"transparent",borderBottom:"3px grey solid"},onChange:this.onInputChange}),this.state.initialText!==this.state.text?d.a.createElement(j,{onSave:this.onSave,onReset:this.onReset}):null):null}}]),n}(d.a.Component)),x=(n(72),function(e){var t=e.progress,n=e.style,a=(100*t).toString()+"%";return d.a.createElement("div",{className:"ProgressMeter",style:n},d.a.createElement("p",{className:"ProgressParagraph"},"Framsteg"),d.a.createElement("div",{className:"ProgressWrapper"},d.a.createElement("div",{className:"Progress",style:{width:a}})))}),D=new(function(){function e(){Object(i.a)(this,e),this.requestHandler=h.b}return Object(s.a)(e,[{key:"post",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C(t),e.next=3,this.requestHandler.post("shorttermgoal",t);case 3:return a=e.sent,e.next=6,a.json();case 6:return o=e.sent,e.abrupt("return",200===a.status&&Object(g.a)(Object(g.a)({},n),{},{_id:o._id}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),T=n(23),I=function(e){if(void 0===e)return 0;var t=e.filter((function(e){return e.todo.length>0}));return t.filter((function(e){return!0===e.finished})).length/t.length},N=Object(T.b)((function(e,t){return{visibleYear:e.visibleYear,visibleMonth:e.visibleMonth}}))((function(e){var t=e.goals,n=e.addGoalToMainState,a=e.onGoalChange,i=e.onEvaluationChange,s=e.type,l=e.style,c=e.evaluation,u=e.identifier,m=e.visibleYear,p=e.visibleMonth,h=function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(m),e.next=3,D.post(C({month:p,longTermPlanningID:u.longTermPlanningID,year:m,type:s+"goal"}));case 3:if(!1===(t=e.sent)){e.next=6;break}return e.abrupt("return",n(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d.a.createElement("div",{className:"GoalOverview",style:l},d.a.createElement("div",{className:"GoalOverviewContent"},d.a.createElement(w,{shortTermGoals:t,onGoalChange:a}),d.a.createElement("div",{className:"StandardCenteredRow"},d.a.createElement(b.a,{onClick:h,style:{color:"green",fontSize:22},label:"L\xe4gg till"}))),d.a.createElement("div",{className:"StandardRow"},d.a.createElement(S,{evaluation:void 0!==c?c:{text:""},type:s,onEvaluationChange:i,style:{width:"calc(70% - 200px)",paddingRight:"30%",marginTop:10,minWidth:300,overflow:"hidden"}}),d.a.createElement(x,{progress:I(t),style:{width:200,marginTop:10,minWidth:200,overflow:"hidden"}})))})),G=function(e){return d.a.createElement("div",null,d.a.createElement("div",{className:"EndTitle"},d.a.createElement("h2",null,"Huvudm\xe5l")),d.a.createElement(N,Object.assign({},e,{type:"end"})))},P=function(e){return d.a.createElement(N,Object.assign({},e,{type:"monthly",label:"M\xe5l f\xf6r m\xe5nad: "}))},M=function(e){return d.a.createElement("div",{style:{marginBottom:80}},d.a.createElement(N,Object.assign({},e,{type:"yearly"})))},L=n(11),Y=(n(73),function(){function e(t){Object(i.a)(this,e),this.year=t}return Object(s.a)(e,[{key:"getNumberOfDaysPerMonth",value:function(){var e=this;return[1,2,3,4,5,6,7,8,9,10,11,12].map((function(t){return new B(e.year,t-1).getLastDay().date}))}},{key:"getFirstDayOfYear",value:function(){return new B(this.year,0).getFirstDay()}}]),e}()),B=function(){function e(t,n){Object(i.a)(this,e),this.month=n,this.year=t}return Object(s.a)(e,[{key:"getFirstWeek",value:function(){for(var e=new Y(this.year),t=7-e.getFirstDayOfYear().day,n=1,a=e.getNumberOfDaysPerMonth().slice(0,this.month).reduce((function(e,t){return e+t}),0)-t;a>=7;)a-=7,n++;return{number:n,firstDay:a}}},{key:"getDayDistribution",value:function(){for(var e=this.getLastDay().date,t=this.getFirstWeek(),n=[],a=t.number,r=7-t.firstDay+1,o=1;o<=e;o++){var i=n;n=[].concat(Object(f.a)(i),[Object(g.a)(Object(g.a)({},this.getDay(o)),{},{weekNumber:a})]),o===r&&(a+=1,r+=7)}return n}},{key:"getDay",value:function(e){var t=new Date(this.year,this.month,e);return{day:t.getDay(),name:["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"][t.getDay()],date:t.getDate(),month:this.month}}},{key:"getFirstDay",value:function(){var e=new Date(this.year,this.month,1);return{day:e.getDay(),name:["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"][e.getDay()],date:e.getDate(),month:this.month}}},{key:"getLastDay",value:function(){var e=new Date(this.year,this.month+1,0);return{day:e.getDay(),name:["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"][e.getDay()],date:e.getDate(),month:this.month}}}]),e}(),R=n(35),A=(n(74),function(e){var t=e.labels,n=e.onButtonClick,a=e.buttonStyle,r=e.activeIndex;return d.a.createElement("div",{className:"ButtonList"},t.map((function(e,t){return d.a.createElement("button",{style:Object(g.a)(Object(g.a)({},F(t,r)),a),onClick:function(){return n(t)}},e)})))}),F=function(e,t){return t.toString()===e.toString()?{borderBottom:"3px steelblue solid",marginBottom:-3}:{}},H=function(e){var t=e.stickAtHeight,n=e.height,a=e.style,r=Object(R.a)(e,["stickAtHeight","height","style"]),o=n-10;return d.a.createElement("div",{className:"StickyList",style:Object(g.a)(Object(g.a)({},a),{},{top:t,height:o,paddingTop:10,paddingBottom:5})},d.a.createElement(A,r))};function U(e,t,n){return n.indexOf(e)===t}function V(e,t){var n=Object.keys(t),a=Object.values(t);return e.filter((function(e){var t=!0;return n.forEach((function(n,r){var o;void 0!==(o=e[n])&&null!==o&&e[n].toString()!==a[r].toString()&&(t=!1)})),t}))}var z=function(e,t){var n=Object.keys(e),a=!0;return n.forEach((function(n){t[n]!==e[n]&&(a=!1)})),a},_=function(e,t,n){var a=t;return"object"===typeof t&&(a=function(e,t){for(var n=0;n<e.length;){var a=e[n];if(z(t,a))return n;n++}return!1}(e,t)),[].concat(Object(f.a)(e.slice(0,a)),[Object(g.a)(Object(g.a)({},e[a]),n)],Object(f.a)(e.slice(a+1)))},W=function(e){var t=e.dailyGoals,n=e.weekGoals,a=e.addGoal,r=e.onGoalChange,o=e.weekDays;e.onEvaluationChange;return d.a.createElement("div",{className:"Week"},d.a.createElement("div",{className:"WeeklyGoals"},d.a.createElement("h3",null,"Veckom\xe5l"),n.map((function(e){return d.a.createElement("div",{className:"StandardRow"},d.a.createElement(E,Object.assign({},e,{onGoalChange:r,placeHolder:"Beskriv aktivitet"})))})),d.a.createElement(b.a,{onClick:function(){return a({type:"weeklygoal"})},style:{color:"green",fontSize:12},label:"L\xe4gg till"})),d.a.createElement("h3",null,"Veckokalender"),d.a.createElement("div",null,o.map((function(e,n){return d.a.createElement("div",{className:"WeekDay"},d.a.createElement("div",{className:"Column"},d.a.createElement("p",{className:"DayName"},e.name),d.a.createElement("p",null,e.date+"/"+(e.month+1))),d.a.createElement("div",{className:"Column2"},V(t,{day:e.day}).map((function(e){return d.a.createElement("div",{className:"StandardRow"},d.a.createElement(E,Object.assign({},e,{onGoalChange:r,placeHolder:"Beskriv aktivitet"})))})),d.a.createElement("div",{className:"StandardCenteredRow"},d.a.createElement(b.a,{onClick:function(){return a({day:e.day,type:"dailygoal"})},style:{color:"green",fontSize:12},label:"L\xe4gg till"}))))}))))},J=function(e){var t=e.dailyGoals,n=e.weeklyGoals,a=e.addGoalToMainState,i=e.onGoalChange,s=e.identifier,l=e.onEvaluationChange,c=e.evaluation,m=new B(s.year,s.month).getDayDistribution(),p=m.map((function(e){return e.weekNumber})).filter(U),v=Object(u.useState)(0),f=Object(L.a)(v,2),b=f[0],y=f[1],k=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.post(C(Object(g.a)(Object(g.a)(Object(g.a)({},s),t),{},{week:p[b]})));case 2:!1!==(n=e.sent)&&a(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d.a.createElement("div",{className:"WeekOverview"},d.a.createElement("h3",null,"Veckoplanering f\xf6r ",h.c[s.month]),d.a.createElement(H,{labels:p.map((function(e){return"v."+e.toString()})),onButtonClick:y,activeIndex:b,buttonStyle:{fontSize:16}}),d.a.createElement(W,{dailyGoals:V(t,{week:p[b]}),weekGoals:V(n,{week:p[b]}),weekDays:m.filter((function(e){return e.weekNumber===p[b]})),onGoalChange:i,addGoal:k,week:p[b],onEvaluationChange:l,identifier:Object(g.a)(Object(g.a)({},s),{},{week:p[b]})}),d.a.createElement(S,{evaluation:void 0!==c?c:{text:""},type:"weekly",onEvaluationChange:l,style:{width:"calc(70% - 200px)",paddingRight:"30%",marginTop:10,minWidth:300,overflow:"hidden"}}))},K=function(e){var t=e.type,n=e.month,a=e.year,r=e.week,o=e.day,i=e.text,s={text:void 0!==i?i:"",longTermPlanningID:e.longTermPlanningID,type:t};switch(t){case"end":return Object(g.a)({},s);case"yearly":return Object(g.a)(Object(g.a)({},s),{},{year:a});case"monthly":return Object(g.a)(Object(g.a)({},s),{},{month:n,year:a});case"weekly":return Object(g.a)(Object(g.a)({},s),{},{year:a,month:n,week:r});case"daily":return Object(g.a)(Object(g.a)({},s),{},{year:a,month:n,week:r,day:o});default:return Object(g.a)(Object(g.a)({},s),{},{month:n,year:a})}},q=n(20);function Q(e){return{type:"visibleYears:updateVisibleYear",payload:{visibleYear:e}}}function X(e){return{type:"visibleMonths:updateVisibleMonth",payload:{visibleMonth:e}}}function Z(e){return{type:"longTermPlanningIDs:updateLongTermPlanningID",payload:{longTermPlanningID:e}}}var $=new Date,ee=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).addGoal=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=h.a[t.type],i=a.state[o],a.setState(Object(v.a)({},o,[].concat(Object(f.a)(i),[Object(g.a)({},t)])));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.componentDidMount=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setInitialState();case 2:case"end":return e.stop()}}),e)}))),a.onGoalChange=function(){var e=Object(o.a)(r.a.mark((function e(t,n,o){var i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=h.a[t],e.next=3,h.b.patchID("shorttermgoal",n,o);case 3:200===e.sent.status&&(s=a.state[i],a.setState(Object(v.a)({},i,_(s,{_id:n},o))));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),a.onStateChange=function(e){a.setState(Object(g.a)({},e))},a.addEvaluation=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var o,i,s,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.state.evaluations,i=K(Object(g.a)(Object(g.a)({},n),{},{type:t,month:a.props.visibleMonth,year:a.props.visibleYear,longTermPlanningID:a.state._id})),e.next=4,h.b.post("evaluation",i);case 4:return s=e.sent,e.next=7,s.json();case 7:l=e.sent,a.setState({evaluations:[].concat(Object(f.a)(o),[Object(g.a)(Object(g.a)({},i),{},{_id:l.id})])});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.onEvaluationChange=function(){var e=Object(o.a)(r.a.mark((function e(t,n,o){var i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==n){e.next=4;break}a.addEvaluation(t,o),e.next=9;break;case 4:return e.next=6,h.b.patchID("evaluation",n,o);case 6:i=e.sent,s=a.state.evaluations,200===i.status&&a.setState({evaluations:_(s,{_id:n},o)});case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),a.setInitialState=Object(o.a)(r.a.mark((function e(){var t,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.onUpdateVisibleYear($.getFullYear()),e.next=3,h.b.get("longtermplanning/"+a.props.id+"?detailed=true");case 3:if(200!==(t=e.sent).status){e.next=11;break}return e.next=7,t.json();case 7:n=e.sent,o=n.goals,console.log(o),a.setState(Object(g.a)(Object(g.a)({},n),{},{endGoals:V(o,{type:"endgoal"}),yearlyGoals:V(o,{type:"yearlygoal"}),monthlyGoals:V(o,{type:"monthlygoal"}),dailyGoals:V(o,{type:"dailygoal"}),weeklyGoals:V(o,{type:"weeklygoal"}),mounted:!0}));case 11:case"end":return e.stop()}}),e)}))),a.state={visibleYear:$.getFullYear(),visibleMonth:$.getMonth(),mounted:!1},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=this.state.mounted?function(e,t){for(var n=[],a=e;a<=t;a++)n.push(a);return n}(parseInt(t.startYear),parseInt(t.expectedEndYear)):[],a={year:this.props.visibleYear,month:this.props.visibleMonth,longTermPlanningID:this.state._id};return!0===this.state.mounted?d.a.createElement("div",{className:"LongTermPlanning"},d.a.createElement("div",{className:"LongTermPlanningTop"},d.a.createElement("div",{className:"LongTermPlanningTopInner"},d.a.createElement(G,{addGoalToMainState:this.addGoal,onGoalChange:this.onGoalChange,onEvaluationChange:this.onEvaluationChange,goals:t.endGoals,evaluation:V(t.evaluations,{type:"end"})[0],identifier:a}))),d.a.createElement("div",{className:"LongTermPlanningInner"},d.a.createElement(H,{labels:n,activeIndex:n.indexOf(this.props.visibleYear),height:49,style:{paddingTop:20},stickAtHeight:-1,onButtonClick:function(t){return e.props.onUpdateVisibleYear(n[t])}}),d.a.createElement("div",{style:{background:"steelblue",height:5,width:"90%",margin:"0 5% 0 5%"}}),d.a.createElement(M,{addGoalToMainState:this.addGoal,onGoalChange:this.onGoalChange,onEvaluationChange:this.onEvaluationChange,goals:V(t.yearlyGoals,{year:this.props.visibleYear}),evaluation:V(t.evaluations,{year:this.props.visibleYear,type:"yearly"})[0],identifier:a}),d.a.createElement(H,{labels:h.c,activeIndex:this.props.visibleMonth,buttonStyle:{fontSize:19},height:49,stickAtHeight:48,onButtonClick:function(t){return e.props.onUpdateVisibleMonth(t.toString())}}),d.a.createElement("div",{style:{minHeight:"100%"}},d.a.createElement(P,{addGoalToMainState:this.addGoal,onGoalChange:this.onGoalChange,onEvaluationChange:this.onEvaluationChange,goals:V(t.monthlyGoals,{year:this.props.visibleYear,month:this.props.visibleMonth}),evaluation:V(t.evaluations,{year:this.props.visibleYear,month:this.props.visibleMonth,type:"monthly"})[0],identifier:a}),d.a.createElement("div",{className:"StandardCenteredRow"},d.a.createElement("button",{onClick:function(){return e.setState({isWeekPlanningVisible:!0})},style:{fontSize:16,fontWeight:600,borderBottom:"2px darkorange solid",color:"darkorange"}},"G\xe5 till veckoplanering f\xf6r m\xe5nad"))),this.state.isWeekPlanningVisible?d.a.createElement("div",{className:"LargeComponent"},d.a.createElement("div",{className:"LargeComponentInner"},d.a.createElement("div",{className:"StandardCenteredRow"},d.a.createElement("button",{onClick:function(){return e.setState({isWeekPlanningVisible:!1})}},"Tillbaka till \xf6versikt")),d.a.createElement(J,{addGoalToMainState:this.addGoal,onGoalChange:this.onGoalChange,onEvaluationChange:this.onEvaluationChange,dailyGoals:V(t.dailyGoals,{year:this.props.visibleYear,month:this.props.visibleMonth}),weeklyGoals:V(t.weeklyGoals,{year:this.props.visibleYear,month:this.props.visibleMonth}),evaluation:V(t.evaluations,{year:this.props.visibleYear,month:this.props.visibleMonth,type:"weekly"})[0],identifier:a}))):null)):null}}]),n}(d.a.Component),te=Object(T.b)((function(e,t){return{visibleYear:e.visibleYear,visibleMonth:e.visibleMonth,longTermPlanningID:e.longTermPlanningID}}),(function(e,t){return Object(q.a)({onUpdateVisibleYear:Q,onUpdateVisibleMonth:X,onUpdateLongTermPlanningID:Z},e)}))(ee),ne=n(31),ae=n(7),re=function(e){var t=e.component,n=e.fallback,a=e.isAuthorized,r=Object(R.a)(e,["component","fallback","isAuthorized"]);return d.a.createElement(ae.b,Object.assign({},r,{render:function(){return a?d.a.createElement(t,r):d.a.createElement(ae.a,{to:n})}}))},oe=n(36),ie=n(33),se=n(25),le=(n(76),new ie.a({mainPath:"https://api-jonapp.herokuapp.com"})),ce=function(){var e=Object(u.useState)(""),t=Object(L.a)(e,2),n=t[0],a=t[1],r=Object(u.useState)(""),o=Object(L.a)(r,2),i=o[0],s=o[1],l=Object(u.useState)(""),c=Object(L.a)(l,2),m=c[0],p=c[1],h=Object(u.useState)(""),v=Object(L.a)(h,2),g=v[0],f=v[1],b=function(e){switch(e.target.name){case"username":s(e.target.value);break;case"password":a(e.target.value);break;case"repeatedPassword":p(e.target.value);break;case"email":f(e.target.value)}};return d.a.createElement("div",null,d.a.createElement("label",null,"Anv\xe4ndarnamn"),d.a.createElement("input",{type:"text",onChange:b,value:i,name:"username"}),d.a.createElement("label",null,"Email"),d.a.createElement("input",{type:"text",onChange:b,value:g,name:"email"}),d.a.createElement("label",null,"L\xf6senord"),d.a.createElement("input",{type:"password",onChange:b,value:n,name:"password"}),d.a.createElement("label",null,"Upprepa l\xf6senord"),d.a.createElement("input",{type:"password",onChange:b,value:m,name:"repeatedPassword"}),d.a.createElement("input",{type:"Submit",value:"Skapa"}))},ue=function(e){var t=e.onVerifiedLogin,n=Object(u.useState)(!1),a=Object(L.a)(n,2),i=a[0],s=a[1],l=Object(u.useState)(""),c=Object(L.a)(l,2),m=c[0],p=c[1],h=Object(u.useState)(""),v=Object(L.a)(h,2),g=v[0],f=v[1],b=function(e){switch(e.target.name){case"username":p(e.target.value);break;case"password":f(e.target.value)}},y=function(){var e=Object(o.a)(r.a.mark((function e(n){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,le.post("auth/login",{username:m,password:g});case 3:return a=e.sent,e.next=6,a.json();case 6:o=e.sent,200===a.status&&(se.a.setCookie("token",o.token),t(o.userID));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!i);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return d.a.createElement("div",{className:"LoginComponent"},i?d.a.createElement(ce,null):d.a.createElement("div",null,d.a.createElement("form",{className:"LoginForm",onSubmit:y},d.a.createElement("label",null,"Anv\xe4ndarnamn"),d.a.createElement("input",{type:"text",onChange:b,value:m,name:"username"}),d.a.createElement("label",null,"L\xf6senord"),d.a.createElement("input",{type:"password",onChange:b,value:g,name:"password"}),d.a.createElement("input",{type:"Submit",value:"Logga in"})),d.a.createElement("div",{style:{marginTop:20}},d.a.createElement("button",{className:"Create-User-Button",onClick:k},"Skapa inloggning"))))};var de=Object(q.c)(window.devToolsExtension&&window.devToolsExtension()),me=Object(q.b)({visibleYear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"visibleYears:updateVisibleYear":return a.visibleYear;default:return e}},longTermplanningID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"longTermPlanningIDs:updateLongTermPlanningID":return a.longTermPlanningID;default:return e}},visibleMonth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"visibleMonths:updateVisibleMonth":return a.visibleMonth;default:return e}}}),pe=Object(q.d)(me,{visibleMonth:"",longTermPlanningID:null,visibleYear:""},de),he=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).setInitialState=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.get("longtermplanning/search?q="+a.props.username);case 2:if(200!==(t=e.sent).status){e.next=8;break}return e.next=6,t.json();case 6:(n=e.sent).length>0&&(a.props.onUpdateLongTermPlanningID(n[0].id),a.setState({longTermPlanningID:n[0].id}));case 8:case"end":return e.stop()}}),e)}))),a.componentDidMount=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setInitialState();case 2:a.setState({mounted:!0});case 3:case"end":return e.stop()}}),e)}))),a.createPlanning=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign(t,{user:a.props.username}),e.next=3,h.b.post("longtermplanning",n);case 3:a.setInitialState();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={data:[],longTermPlanningID:null,mounted:!1},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.state;return t.mounted?d.a.createElement("div",{className:"Content"},d.a.createElement("button",{name:"logout",className:"LogoutButton",onClick:function(t){t.preventDefault(),console.log("logout"),e.props.onLogout()}},"Logga ut"),null===t.longTermPlanningID?d.a.createElement("div",{className:"StandardRow",style:{marginTop:"25vh"}},d.a.createElement("p",{style:{marginBottom:30}},"Du har inte skapat n\xe5gon planering"),d.a.createElement(ne.default,{onFinalSubmit:this.createPlanning})):d.a.createElement(te,{id:this.state.longTermPlanningID})):null}}]),n}(d.a.Component),ve=Object(T.b)((function(e,t){return{longTermPlanningID:e.longTermPlanningID}}),(function(e,t){return Object(q.a)({onUpdateLongTermPlanningID:Z},e)}))(he),ge=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.verifyLoginStatus();case 2:case"end":return e.stop()}}),e)}))),a.onLogout=function(){console.log("Logout"),se.a.removeCookie("token"),a.removeUser()},a.removeUser=function(){a.setState({userID:null,username:null})},a.setUser=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.get("user/"+t);case 2:return n=e.sent,e.next=5,n.json();case 5:o=e.sent,200===n.status&&a.setState({userID:o.userID,username:o.username});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.verifyLoginStatus=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.post("auth/verify",{});case 2:if(200!==(t=e.sent).status){e.next=9;break}return e.next=6,t.json();case 6:return n=e.sent,e.next=9,a.setUser(n.authData.userID);case 9:a.setState({mounted:!0});case 10:case"end":return e.stop()}}),e)}))),a.state={userID:null,username:null,mounted:!1},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=null!==this.state.username;return this.state.mounted?d.a.createElement("div",{className:"Body",style:{width:"100%",textAlign:"center"}},d.a.createElement(oe.a,null,d.a.createElement(ae.d,null,d.a.createElement("div",{style:{display:"inline-block"}},d.a.createElement(re,{path:"/",component:function(){return d.a.createElement(ve,{username:e.state.username,onLogout:e.onLogout})},isAuthorized:t,fallback:"/login"}),d.a.createElement(re,{path:"/login",component:function(){return d.a.createElement(ue,{onVerifiedLogin:e.setUser})},fallback:"/",isAuthorized:!t}))))):null}}]),n}(d.a.Component);p.a.render(d.a.createElement(T.a,{store:pe},d.a.createElement(ge,null)),document.getElementById("root"))},,,,,,,,,function(e,t,n){e.exports=n(43)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){}],[[52,1,2]]]);
//# sourceMappingURL=main.7235af10.chunk.js.map